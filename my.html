<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>未回収楽曲チェックツール</title>
    <style>
        h3 {
            display: inline;
            margin-right: 10px;
        }
    </style>
    <script>
        function searchSetlist() {
            var resultDiv = document.getElementById("result");

            // song_f.txtの内容を取得
            var songFileContent = getFileContent("song_y.txt");

            // song_f.txtの内容を行ごとに分割して配列に格納
            var songLines = songFileContent.split("\n");

            // 検索対象ファイルのチェックボックスを取得
            var checkboxes = document.querySelectorAll("input[type='checkbox'][class='setlist-checkbox']");

            // 検索結果を格納するオブジェクトを作成
            var searchResult = {};

            checkboxes.forEach(function(checkbox) {
                if (checkbox.checked) {
                    var filePath = "setlist/" + checkbox.id + ".txt";
                    var setlistContent = getFileContent(filePath);

                    songLines.forEach(function(line) {
                        var songData = line.split(",");
                        var songName = songData[0].trim();

                        if (setlistContent.includes(songName)) {
                            searchResult[songName] = "あり";
                        } else if (!searchResult[songName]) {
                            searchResult[songName] = "なし";
                        }
                    });
                }
            });

            // 検索結果を表示
            resultDiv.innerHTML = "";
            for (var song in searchResult) {
                if (searchResult[song] === "なし") {
                    var result = song + "<br>";
                    resultDiv.innerHTML += result;
                }
            }
        }

        function getFileContent(filePath) {
            // XMLHttpRequestを使用してファイルの内容を非同期で取得する
            var xhr = new XMLHttpRequest();
            xhr.open("GET", filePath, false);
            xhr.send();
            return xhr.responseText;
        }
    </script>
</head>
<body>
    <h1>未回収楽曲チェックツール</h1>
    <input type="checkbox" id="2018081501" class="setlist-checkbox" checked>唯涼祭
    <input type="checkbox" id="2020122401" class="setlist-checkbox" checked>小倉唯 ONLINE クリスマス ライブ 2020 ~Winter Twinkle Magic~
    <h3><strong>HAPPY JAM</strong></h3>
    <input type="checkbox" id="2015070501" class="setlist-checkbox" checked>昼公演
    <input type="checkbox" id="2015070502" class="setlist-checkbox" checked>夜公演
    <h3><strong>High-Touch☆Summer</strong></h3>
    <input type="checkbox" id="2016070901" class="setlist-checkbox" checked>幕張1日目
    <input type="checkbox" id="2016071001" class="setlist-checkbox" checked>幕張2日目  
    <input type="checkbox" id="2016071701" class="setlist-checkbox" checked>愛知公演
    <input type="checkbox" id="2016080601" class="setlist-checkbox" checked>大阪公演    
    <input type="checkbox" id="2016081401" class="setlist-checkbox" checked>群馬公演
    <h3><strong>Smiley Cherry</strong></h3>
    <input type="checkbox" id="2017100901" class="setlist-checkbox" checked>昼公演
    <input type="checkbox" id="2017100902" class="setlist-checkbox" checked>夜公演
    <h3><strong>Platinum Airline☆</strong></h3>
    <input type="checkbox" id="2018011301" class="setlist-checkbox" checked>宮城公演
    <input type="checkbox" id="2018012801" class="setlist-checkbox" checked>愛知公演
    <input type="checkbox" id="2018020401" class="setlist-checkbox" checked>大阪公演
    <input type="checkbox" id="2018031001" class="setlist-checkbox" checked>静岡公演    
    <input type="checkbox" id="2018031801" class="setlist-checkbox" checked>東京公演
    <input type="checkbox" id="2018051201" class="setlist-checkbox" checked>～Tomorrow Town～
    <h3><strong>Step Apple</strong></h3>
    <input type="checkbox" id="2019040601" class="setlist-checkbox" checked>大阪公演
    <input type="checkbox" id="2019040701" class="setlist-checkbox" checked>滋賀公演
    <input type="checkbox" id="2019041401" class="setlist-checkbox" checked>愛知公演
    <input type="checkbox" id="2019042101" class="setlist-checkbox" checked>新潟公演    
    <input type="checkbox" id="2019042801" class="setlist-checkbox" checked>宮城公演
    <input type="checkbox" id="2019050301" class="setlist-checkbox" checked>幕張1日目
    <input type="checkbox" id="2019050401" class="setlist-checkbox" checked>幕張2日目   
    <h3><strong>#Re♥LOVEcall</strong></h3>
    <input type="checkbox" id="2021070401" class="setlist-checkbox" checked>昼公演
    <input type="checkbox" id="2021070402" class="setlist-checkbox" checked>夜公演
    <h3><strong>10th Anniversary Assemble!!</strong></h3>
    <input type="checkbox" id="2023071701" class="setlist-checkbox" checked>昼公演
    <input type="checkbox" id="2023071702" class="setlist-checkbox" checked>夜公演
    <h3><strong>To the 11'Eleven</strong></h3>
    <input type="checkbox" id="2023112301" class="setlist-checkbox" checked>昼公演
    <input type="checkbox" id="2023112302" class="setlist-checkbox" checked>夜公演
    <button onclick="searchSetlist()">検索</button>
    <div id="result"></div>
</body>
</html>
