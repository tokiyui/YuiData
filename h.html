function displaySetlists(dates, titles, venues, setlists) {
    const headerRow = document.getElementById('headerRow');
    const setlistBody = document.getElementById('setlistBody');

    // Clear existing content
    headerRow.innerHTML = '';
    setlistBody.innerHTML = '';

    // Add headers for dates, titles, and venues
    dates.forEach(date => headerRow.insertAdjacentHTML('beforeend', `<th>${date}</th>`));
    setlistBody.insertAdjacentHTML('beforeend', `<tr>${titles.map(title => `<td>${title}</td>`).join('')}</tr>`);
    setlistBody.insertAdjacentHTML('beforeend', `<tr>${venues.map(venue => `<td>${venue}</td>`).join('')}</tr>`);

    // Find the maximum number of songs among all concerts
    let maxSongs = 0;
    setlists.forEach(setlist => {
        maxSongs = Math.max(maxSongs, setlist.length);
    });

    // Add encore row to all setlists if an encore exists
    const hasEncore = setlists.some(setlist => setlist.includes('【アンコール】'));
    if (hasEncore) {
        setlists.forEach(setlist => {
            const index = setlist.indexOf('【アンコール】');
            if (index !== -1) {
                const encoreLength = maxSongs - setlist.length + 1; // Add 1 row for encore
                for (let i = 0; i < encoreLength; i++) {
                    setlist.splice(index, 0, ''); // Add empty cells for encore songs
                }
            }
        });
    }

    // Initialize array to track whether each column contains different songs
    const isDifferentSongColumn = new Array(maxSongs).fill(false);

    // Check for different songs in each column
    for (let i = 0; i < maxSongs; i++) {
        for (let j = 1; j < setlists.length; j++) {
            if (setlists[j][i] !== setlists[0][i]) {
                isDifferentSongColumn[i] = true;
                break;
            }
        }
    }

    // Add songs to the setlist with pink background for columns with different songs
    for (let i = 0; i < maxSongs; i++) {
        const songCells = setlists.map((setlist, index) => {
            let song = setlist[i];
            if (song) {
                const className = isDifferentSongColumn[i] ? 'pink-background' : '';
                return `<td class="${className}">${song}</td>`;
            } else {
                return '<td></td>';
            }
        });
        setlistBody.insertAdjacentHTML('beforeend', `<tr>${songCells.join('')}</tr>`);
    }
}
